<html>
<body>
<h1>Transactional Maps</h1>
<p>Working on maps as if they were databases.
</p>

 <p>One major part of the Transaction Component are a set of wrappers that allow to add transactional control
to any kind of map implemening the <code>java.util.Map</code> interface. Transactional control refers 
to the procedure that you start a transaction do a number of statements and finally decide to either
commit the changes, i.e. make them permanent, or rather roll back the transaction by discarding all your changes.
</p>

<p>As an example imagine a client application where you do complex stuff (maybe 
talking to one or more servers) and the user is allowed to cancel the 
whole operation. Or it might be needed to be canceled because of errors that occur in the middle of the whole request. 
Now image all the results have been stored in a transactional map and you 
simply do a rollback on errors and a commit upon success.
</p>

<p>The whole thing gets a bit more complicated when more than one transaction is executed on a map at the same time. 
	In this case these transactions are running <em>concurrently</em>. 
	Problems that might occur with concurrent transaction are diverse and implementations differ in how much 
	spurious phenomena can be observed. Which phenomenon can occur with which transactional map implementation can be found in the chart a little bit down this page. Finally, there is a
	<a
	href="http://www.cs.umb.edu/cs734/CritiqueANSI_Iso.pdf">great
	more general article about different isolations</a>.  </p>
<p>If none of
the known phenomena is observable - which of course is the best you can get - a transaction is called <em>serializable</em>.
 The origin of this term comes from a differet, but equivalent definition. This
definition switches the perspective from local phenomena observed inside
transactions to global one, more specific global corretctness. If a set of
transactions are executed
concurrently and there is a strictly sequential execution schedule of those transactions that leaves the
map in the same state as the concurrent one those transactions are called <em>
serializable</em>.
</p>

<h2>Comparision of transactional map implementations</h2>

<table summary="" border="1" frame="HSIDES" rules="GROUPS" width="100%" cellpadding="3" cellspacing="0" dir="ltr" title="">

<thead>
<tr>
<th align="left" valign="bottom" scope="col"></th>
<th align="left" valign="bottom" scope="col"> <font face="Arial,
Helvetica, sans-serif"><strong><a href="../apidocs/org/apache/commons/transaction/memory/TransactionalMapWrapper.html">TransactionalMapWrapper</a></strong></font></th>
<th align="left" valign="bottom" scope="col"> <font face="Arial, Helvetica, sans-serif"><strong><a href="../apidocs/org/apache/commons/transaction/memory/OptimisticMapWrapper.html">OptimisticMapWrapper</a></strong></font></th>
<th align="left" valign="bottom" scope="col"> <font face="Arial, Helvetica, sans-serif"><strong><a href="../apidocs/org/apache/commons/transaction/memory/PessimisticMapWrapper.html">PessimisticMapWrapper</a></strong></font></th>
</tr>
</thead>

<tbody>
<tr align="left" valign="top">
<td> 

<p>Lost update</p>

</td>
<td> 

<p>Possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Dirty write</p>

</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Dirty read</p>
</td>
<td> 


<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Lost update</p>

</td>
<td> 

<p>Possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Nonrepeatable read</p>
</td>
<td> 

<p>Possible</p>

</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Phantoms</p>
</td>
<td> 

<p>Possible</p>
</td>
<td> 


<p>Not possible</p>
</td>
<td> 


<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Read Skew</p>

</td>
<td> 

<p>Possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Write Skew</p>

</td>
<td> 

<p>Possible</p>
</td>
<td> 

<p>Possible</p>
</td>
<td> 

<p>Not possible</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 


<p>Readers block writers</p>
</td>
<td> 

<p>No</p>
</td>
<td> 

<p>No</p>
</td>
<td> 

<p>Yes</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Writers block readers</p>

</td>
<td> 

<p>No</p>
</td>
<td> 

<p>No</p>
</td>
<td> 

<p>Yes</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Writers block writers</p>
</td>
<td> 

<p>No</p>

</td>
<td> 

<p>No</p>

</td>
<td> 

<p>Yes</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Might deadlock</p>
</td>
<td> 

<p>No</p>

</td>
<td> 

<p>No</p>

</td>
<td> 

<p>Yes</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Commit might fail</p>
</td>
<td> 

<p>No</p>

</td>
<td> 

<p>Yes</p>

</td>
<td> 

<p>No</p>
</td>
</tr>

<tr align="left" valign="top">
<td> 

<p>Isolation Level</p>

</td>
<td> 

<p>Read Committed (with lost updates possible)</p>
</td>
<td> 

<p>Snapshot (Oracle would call it Serializable)</p>
</td>
<td> 

<p>Serializable</p>
</td>
</tr>

</tbody>
</table>


</body>
</html>